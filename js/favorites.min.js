$(function(){let o="favProducts",n="favFilter";var t=$(".products");let l=t.find(".card"),i=$(".viewProducts").find("button").first(),s=(l.each(function(t){var e=$(this);e.attr("data-id")||e.attr("data-id","p"+(t+1))}),new Set(JSON.parse(localStorage.getItem(o)||"[]")));function r(t,e){var a=t.find(".fav");a.find(".icon-outline").toggleClass("d-none",e),a.find(".icon-filled").toggleClass("d-none",!e),t.toggleClass("is-fav",e),a.attr("aria-pressed",e)}function c(){let e="on"===localStorage.getItem(n),a=new Set(JSON.parse(localStorage.getItem(o)||"[]"));i.toggleClass("active",e),l.each(function(){var t=String($(this).data("id")),t=a.has(t);$(this).toggleClass("d-none",e&&!t)})}function g(){var t=s.size,e="on"===localStorage.getItem(n);i.toggleClass("d-none",0===t),0===t?i.text("View Favorites Only"):e?i.text("Show All"):i.text(`View Favorites Only (${t})`)}l.each(function(){var t=$(this);r(t,s.has(String(t.data("id"))))}),c(),g(),t.on("click",".fav",function(t){t.preventDefault();var t=$(this).closest(".card"),e=String(t.data("id")),a=!s.has(e),e=(a?s.add(e):s.delete(e),localStorage.setItem(o,JSON.stringify([...s])),r(t,a),"on"===localStorage.getItem(n));e&&t.toggleClass("d-none",!a),g(),e&&0===s.size&&(localStorage.setItem(n,"off"),c())}),i.on("click",function(){var t="on"!==localStorage.getItem(n);localStorage.setItem(n,t?"on":"off"),c(),g()})});